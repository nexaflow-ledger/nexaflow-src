# NexaFlow Node Configuration
# Copy to nexaflow.toml and edit to taste.

[node]
node_id = "validator-1"
host = "0.0.0.0"
port = 9001
peers = []                # e.g. ["127.0.0.1:9002", "127.0.0.1:9003"]

[ledger]
total_supply = 100_000_000_000.0
account_reserve = 20.0
owner_reserve = 5.0
min_fee = 0.000010

[consensus]
interval_seconds = 10
proposal_wait_seconds = 2.0
initial_threshold = 0.50
final_threshold = 0.80
# BFT mode — sign and verify consensus proposals.
# Generate keys with:  python scripts/gen_node_cert.py --node-id validator-1
validator_key_file = ""              # e.g. "certs/validator-1.key"
validator_pubkeys_dir = ""           # e.g. "certs/pubkeys/"

[tls]
# When enabled every P2P connection is TLS-encrypted.
# Set verify_peer = true for mutual TLS (recommended for production).
# Generate certificates with:  python scripts/gen_node_cert.py --node-id validator-1
enabled = false
cert_file = "certs/node.crt"
key_file  = "certs/node.key"
ca_file   = "certs/ca.crt"
verify_peer = true              # mutual TLS — require peer certificate

[api]
enabled = false
host = "127.0.0.1"
port = 8080
api_key = ""                 # set a secret key to protect POST endpoints (or use NEXAFLOW_API_KEY env)
rate_limit_rpm = 120         # max requests per minute per IP (0 = unlimited)
cors_origins = []            # e.g. ["https://dashboard.nexaflow.io"]
max_body_bytes = 1_048_576   # 1 MiB

[storage]
enabled = false
backend = "sqlite"
path = "data/nexaflow.db"

[wallet]
wallet_file = "data/wallet.json"   # auto-created on first run
auto_genesis = true                # auto-assign full supply when [genesis.accounts] is empty

# Deterministic genesis — every node must use the same genesis config.
# When [genesis.accounts] is empty and auto_genesis = true, the full supply
# is automatically assigned to this node's wallet address on first run.
[genesis.accounts]
# "nGenesisNXF" = 100_000_000_000.0
# "rFoundation" = 10_000_000.0

[logging]
level = "INFO"
format = "human"            # "human" or "json"
# file = "logs/nexaflow.log" # uncomment to log to file
